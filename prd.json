{
  "project": "canvas-lms-mcp",
  "branchName": "feat/expanded-tools",
  "userStories": [
    {
      "id": "US-014",
      "title": "List & Identify Observed Students",
      "description": "Add a `students` CLI command and `get_students` MCP tool that returns the list of students being observed by the current user (parent/observer account). Use Canvas API `GET /api/v1/users/self/observees` which returns an array of User objects for each observed student. For each student, return: id, name, short_name, and sortable_name. This tool is the FOUNDATION for multi-student support — the AI calls it first to map student names (e.g., 'Ronin', 'Rory') to Canvas student IDs, then passes the correct student_id to other tools. The tool description must emphasize: 'Call this tool FIRST when the user mentions a student by name. Use the returned student_id in subsequent tool calls. NEVER guess a student_id.' Follow the 4-layer pattern: 1) The User type already exists in src/types/canvas.ts — no new types needed, 2) Create src/api/observees.ts with a listObservees() function, 3) Create ObservedStudent service type in src/services/types.ts and src/services/students.ts, 4) Export from src/services/index.ts, 5) Create src/commands/students.ts with --format option, 6) Register in main.ts, 7) Create src/mcp/tools/get-students.ts with Zod schema (no parameters needed — it lists all observees for the authenticated user), 8) Register in src/mcp/tools/index.ts, 9) Update CLAUDE.md parity table. Quality: run deno task check, deno task lint, deno task fmt before committing.",
      "priority": 1,
      "passes": true,
      "claimed_by": "agent-1",
      "claimed_at": "2026-02-13T15:35:13Z"
    },
    {
      "id": "US-015",
      "title": "Multi-Student Status Overview",
      "description": "Add a `status --all-students` CLI flag and `get_all_students_status` MCP tool that returns a comprehensive status for ALL observed students in a single call, clearly labeled per student to prevent data mix-ups. Implementation: 1) Call the observees API (reuse the service from US-014, or call GET /api/v1/users/self/observees directly) to get all observed students, 2) For each student, call the existing getComprehensiveStatus service with that student's ID, 3) Return an array of objects: [{student_name: string, student_id: number, status: ComprehensiveStatus}, ...]. The MCP tool description must emphasize: 'Use this tool when the user asks about ALL their students or wants a combined overview. Each student\\'s data is clearly separated and labeled. NEVER mix data between students when presenting results.' The tool should accept optional params: days_upcoming (default 7), days_grades (default 7), low_grade_threshold (default 70) — same as get_comprehensive_status. For the CLI, add an --all-students flag to the existing `status` command (in src/commands/status.ts) that triggers the multi-student path. Create: 1) MultiStudentStatus type in src/services/types.ts, 2) src/services/multi-student-status.ts, 3) Export from src/services/index.ts, 4) Create src/mcp/tools/get-all-students-status.ts, 5) Register in src/mcp/tools/index.ts, 6) Modify src/commands/status.ts to add --all-students flag, 7) Update CLAUDE.md. Quality: deno task check, deno task lint, deno task fmt.",
      "priority": 2,
      "passes": true,
      "claimed_by": "agent-1",
      "claimed_at": "2026-02-13T15:56:15Z"
    },
    {
      "id": "US-016",
      "title": "Calendar Events",
      "description": "Add a `calendar` CLI command and `get_calendar_events` MCP tool that shows non-assignment calendar events (office hours, review sessions, school events, field trips, etc.). Use Canvas API `GET /api/v1/calendar_events` with `type=event` (NOT assignment — assignments are already covered by other tools), `context_codes[]=course_<id>` for course filtering, and `start_date`/`end_date` for date range. For each event show: title, description (truncated to ~200 chars), start_at, end_at, location_name, location_address, course name, and URL. The service should accept `student_id` (optional, for observer course list), `course_id` (optional — if omitted, include all active courses by building context_codes from the courses list), and `days` (optional, default 14, look ahead N days from today). This is DIFFERENT from the existing `upcoming` command which shows assignment due dates from `/users/:id/upcoming_events`. Follow the 4-layer pattern: 1) Add CalendarEvent type to src/types/canvas.ts with fields: id, title, description, start_at, end_at, location_name, location_address, context_code, html_url, workflow_state, 2) Create src/api/calendar.ts, 3) Create CalendarEventItem service type in src/services/types.ts and src/services/calendar.ts, 4) Export from src/services/index.ts, 5) Create src/commands/calendar.ts with --course-id, --days, --format, --student options, 6) Register in main.ts, 7) Create src/mcp/tools/get-calendar-events.ts with Zod schema, 8) Register in src/mcp/tools/index.ts, 9) Update CLAUDE.md parity table. Quality: deno task check, deno task lint, deno task fmt.",
      "priority": 3,
      "passes": true,
      "claimed_by": "agent-2",
      "claimed_at": "2026-02-13T15:36:00Z"
    },
    {
      "id": "US-017",
      "title": "Submission Feedback & Comments",
      "description": "Add a `feedback` CLI command and `get_feedback` MCP tool that shows teacher comments and feedback on student submissions. This is critical for parents who want to see what teachers are saying about their child's work. Use the existing Canvas submissions API `GET /api/v1/courses/:course_id/students/submissions` with `include[]=submission_comments,assignment` and `student_ids[]=<student_id>`. Filter to submissions that have at least one submission_comment. The service should accept `student_id` (required), `course_id` (optional — if omitted, fetch from all active courses via Promise.all), and `days` (optional, default 14, filter to comments from the last N days by the comment's created_at). Return a list of feedback items sorted by most recent comment first, each with: assignment_name, course_id, course_name, comment_text, author_name (the teacher/TA who commented), comment_date, student_score, points_possible, grade, and assignment URL. The SubmissionComment type already exists in src/types/canvas.ts. The submissions API module exists at src/api/submissions.ts — reuse or extend it. Follow the 4-layer pattern: 1) No new Canvas API types needed (SubmissionComment exists), 2) Reuse/extend src/api/submissions.ts to fetch with submission_comments include, 3) Create FeedbackItem service type in src/services/types.ts and src/services/feedback.ts, 4) Export from src/services/index.ts, 5) Create src/commands/feedback.ts with --course-id, --days, --format, --student options, 6) Register in main.ts, 7) Create src/mcp/tools/get-feedback.ts with Zod schema, 8) Register in src/mcp/tools/index.ts, 9) Update CLAUDE.md parity table. Quality: deno task check, deno task lint, deno task fmt.",
      "priority": 4,
      "passes": false,
      "claimed_by": "agent-1",
      "claimed_at": "2026-02-13T16:05:00Z"
    },
    {
      "id": "US-018",
      "title": "Discussion Topics",
      "description": "Add a `discussions` CLI command and `get_discussions` MCP tool that shows discussion topics across courses, including participation status. Use Canvas API `GET /api/v1/courses/:course_id/discussion_topics` with `order_by=recent_activity` and `per_page=100`. For each topic show: title, course_name, posted_at (when the topic was created), last_reply_at, discussion_type (side_comment or threaded), discussion_subentry_count (number of replies), unread_count, whether the topic is graded (has an assignment association — check if assignment_id is present), whether it requires an initial post (require_initial_post field), and the html_url. The service should accept `student_id` (optional, for observer course list), `course_id` (optional — if omitted, fetch from all active courses via Promise.all), and `days` (optional, default 30, filter to topics with last_reply_at or posted_at within N days). Follow the 4-layer pattern: 1) Add DiscussionTopic type to src/types/canvas.ts with fields: id, title, message, posted_at, last_reply_at, discussion_type, discussion_subentry_count, unread_count, assignment_id, require_initial_post, html_url, context_code, user_name, read_state, 2) Create src/api/discussions.ts, 3) Create DiscussionItem service type in src/services/types.ts and src/services/discussions.ts, 4) Export from src/services/index.ts, 5) Create src/commands/discussions.ts with --course-id, --days, --format, --student options, 6) Register in main.ts, 7) Create src/mcp/tools/get-discussions.ts with Zod schema, 8) Register in src/mcp/tools/index.ts, 9) Update CLAUDE.md parity table. Quality: deno task check, deno task lint, deno task fmt.",
      "priority": 5,
      "passes": false,
      "claimed_by": "agent-2",
      "claimed_at": "2026-02-13T16:03:35Z"
    },
    {
      "id": "US-019",
      "title": "Course People (Teachers & TAs)",
      "description": "Add a `people` CLI command and `get_people` MCP tool that shows teachers and teaching assistants for courses. This helps parents know who teaches each course and how to contact them. Use Canvas API `GET /api/v1/courses/:course_id/users` with `enrollment_type[]=teacher&enrollment_type[]=ta` and `include[]=email,enrollments`. For each person return: name, role (Teacher or TA, derived from their enrollment type), email (if available), course_id, course_name. The service should accept `student_id` (optional, for observer course list) and `course_id` (optional — if omitted, fetch from all active courses via Promise.all). When fetching across all courses, deduplicate people who appear in multiple courses — instead of listing them multiple times, list them once with an array of their courses (e.g., {name: 'Ms. Smith', role: 'Teacher', email: '...', courses: [{id: 1, name: 'Math'}, {id: 2, name: 'Science'}]}). Follow the 4-layer pattern: 1) No new Canvas API types needed (User and Enrollment types exist), 2) Create src/api/people.ts, 3) Create PersonItem service type in src/services/types.ts and src/services/people.ts, 4) Export from src/services/index.ts, 5) Create src/commands/people.ts with --course-id, --format, --student options, 6) Register in main.ts, 7) Create src/mcp/tools/get-people.ts with Zod schema, 8) Register in src/mcp/tools/index.ts, 9) Update CLAUDE.md parity table. Quality: deno task check, deno task lint, deno task fmt.",
      "priority": 6,
      "passes": false
    }
  ]
}
